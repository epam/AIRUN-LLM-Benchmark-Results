import { useEffect, useRef } from 'react';

export function useTodoEscape(onUscape: () => void) {
  const elemRef = useRef<HTMLElement>(null);

  useEffect(() => {
    function handleEscape(event: KeyboardEvent) {
      if (event.keyCode === 27) // ESCAPE_KEY code
        onUscape();
    }

    const elem = elemRef.current;
    if (elem) {
      elem.addEventListener('keydown', handleEscape);
      return () => {
        elem.removeEventListener('keydown', handleEscape);
      };
    }
  }, [onUscape]);

  return elemRef;
}
