import { useEffect } from 'react'; import { useDispatch, useSelector } from 'react-redux'; import { addTodo, removeTodo, toggleTodo, clearCompleted, markAll } from '../store/todoSlice'; import { Todo } from '../types/todo'; export const useTodos = () => { const dispatch = useDispatch(); const todos = useSelector((state: any) => state.todos); const remainingCount = todos.filter((todo: Todo) => !todo.completed).length; const doneCount = todos.length - remainingCount; const allChecked = remainingCount === 0; useEffect(() => { const storedTodos = JSON.parse(localStorage.getItem('todos-angularjs-requirejs') || '[]'); storedTodos.forEach((todo: Todo) => dispatch(addTodo(todo))); }, [dispatch]); useEffect(() => { localStorage.setItem('todos-angularjs-requirejs', JSON.stringify(todos)); }, [todos]); return { todos, remainingCount, doneCount, allChecked, addTodo: (title: string) => dispatch(addTodo({ title, completed: false })), removeTodo, toggleTodo, clearCompleted: () => dispatch(clearCompleted()), markAll: (done: boolean) => dispatch(markAll(done)) }; };